(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{51:function(e,a,t){e.exports=t(97)},56:function(e,a,t){},57:function(e,a,t){},58:function(e,a,t){},87:function(e,a){},90:function(e,a,t){},91:function(e,a,t){},92:function(e,a,t){},97:function(e,a,t){"use strict";t.r(a);var n=t(1),c=t.n(n),r=t(44),s=t.n(r),o=t(12),m=t(13),l=t(48),u=t(2);t(56),t(57);var i=function(e){var a=Object(n.useContext)(x);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"join-container",onSubmit:function(a){return function(a){a.preventDefault(),e.history.push("/chat")}(a)}},c.a.createElement("form",{className:"join-form"},c.a.createElement("h2",null,"Join Chat"),c.a.createElement("label",{htmlFor:"name"},"Name"),c.a.createElement("input",{type:"text",name:"name",value:a.chatDetailsState.name,onChange:function(e){a.dispatch({type:"add_name",payload:{name:e.target.value}})},required:!0}),c.a.createElement("label",{htmlFor:"room"},"Room"),c.a.createElement("input",{type:"text",name:"room",value:a.chatDetailsState.room,onChange:function(e){a.dispatch({type:"add_room",payload:{room:e.target.value}})},required:!0}),c.a.createElement("input",{type:"submit",className:"submit",value:"Join"}))))},f=t(50),p=(t(58),t(45)),E=t.n(p),d=(t(90),t(46));var h=function(e){return c.a.createElement("div",{className:"infobar-container"},c.a.createElement("span",{className:"room-name"},e.roomname),c.a.createElement("a",{className:"close",href:"/"},c.a.createElement(d.a,null)))},v=(t(91),t(47));var g=function(e){var a=e.message,t=e.sendMessage,n=e.setMessage;return c.a.createElement("div",{className:"messagesend-container"},c.a.createElement("input",{type:"text",placeholder:"Type a message",value:a,onChange:function(e){return n(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?t(e):null}}),c.a.createElement("span",{onClick:function(e){t(e)}},c.a.createElement(v.a,null)))};t(92);var b,j=function(e){var a=e.messages,t=e.name;return c.a.createElement("div",{className:"messages-section-container"},a.map((function(e,a){return e.user!=t?c.a.createElement("div",{className:"message-box-wrapper left",key:a},c.a.createElement("div",{className:"message-box"},c.a.createElement("span",{className:"user"},e.user),c.a.createElement("span",{className:"message"},e.text))):c.a.createElement("div",{className:"message-box-wrapper right",key:a},c.a.createElement("div",{className:"message-box"},c.a.createElement("span",{className:"message"},e.text)))})))};var y=function(e){var a=Object(n.useContext)(x),t=Object(n.useState)(" "),r=Object(o.a)(t,2),s=r[0],m=r[1],l=Object(n.useState)([]),u=Object(o.a)(l,2),i=u[0],p=u[1];return Object(n.useEffect)((function(){return console.log(s),(b=E()("http://localhost:5000")).emit("join",{name:a.chatDetailsState.name,room:a.chatDetailsState.room},(function(a,t){a&&(a.chatDataAvail||e.history.push("/"))})),function(){b.emit("disconnect"),b.off()}}),["http://localhost:5000"]),Object(n.useEffect)((function(){console.log(i),b.on("message",(function(e){p([].concat(Object(f.a)(i),[e]))}))}),[i]),c.a.createElement("div",{className:"chat-container"},c.a.createElement(h,{roomname:a.chatDetailsState.room}),c.a.createElement(j,{messages:i,name:a.chatDetailsState.name}),c.a.createElement(g,{message:s,setMessage:m,sendMessage:function(e){e.preventDefault(),s&&b.emit("sendMessage",s,(function(){return m("")}))}}))},N={name:"",room:""},O=function(e,a){switch(a.type){case"add_name":return Object(m.a)(Object(m.a)({},e),{},{name:a.payload.name});case"add_room":return Object(m.a)(Object(m.a)({},e),{},{room:a.payload.room});default:return e}},x=c.a.createContext();var S=function(){var e=Object(n.useReducer)(O,N),a=Object(o.a)(e,2),t=a[0],r=a[1];return Object(n.useEffect)((function(){console.log(t)}),[t]),c.a.createElement(x.Provider,{value:{chatDetailsState:t,dispatch:r}},c.a.createElement("div",null,c.a.createElement(l.a,null,c.a.createElement(u.a,{path:"/",exact:!0,component:i}),c.a.createElement(u.a,{path:"/chat",component:y}))))};s.a.render(c.a.createElement(S,null),document.querySelector("#root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.652eedee.chunk.js.map